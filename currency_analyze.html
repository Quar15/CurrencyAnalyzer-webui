<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyzer | Currency Analyzer</title>
    <link rel="icon" type="image/x-icon" href="/img/favicon-green.ico">
    <link rel="stylesheet" href="css/style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://unpkg.com/htmx.org@1.9.12" integrity="sha384-ujb1lZYygJmzgSwoxRggbCHcjc0rB2XoQrxeTUQyRjrOnlCoYta87iKBWq3EsdM2" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.4.1/dist/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-crosshair@1.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.4.0/dist/chartjs-plugin-annotation.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="js/app.js"></script>
</head>
<body>
    <nav>
        <div class="logo">
            <img src="img/logo.png" alt="Currency Analyzer">
        </div>
        <div class="menu">
            <a href="currency_list.html"><i class='bx bx-coin'></i>Currencies</a>
            <a href="currency_analyze.html"><i class='bx bx-search'></i>Analyzer</a>
        </div>
        <div class="picked-currencies">
            <h4>6/6</h4>
            <div class="currency">
                <img src="" alt="X">
                <p>PLN</p>
                <div class="remove">-</div>
            </div>
            <div class="currency">
                <img src="" alt="X">
                <p>USD</p>
                <div class="remove">-</div>
            </div>
            <div class="currency">
                <img src="" alt="X">
                <p>XYZ</p>
                <div class="remove">-</div>
            </div>
            <div class="currency">
                <img src="" alt="X">
                <p>ABC</p>
                <div class="remove">-</div>
            </div>
            <div class="currency">
                <img src="" alt="X">
                <p>DEF</p>
                <div class="remove">-</div>
            </div>
            <div class="currency">
                <img src="" alt="X">
                <p>GHI</p>
                <div class="remove">-</div>
            </div>
        </div>
    </nav>
    <div class="wrapper" id="wrapper">
        <div class="info">
            <h2>Analyzer</h2>
            <div class="filters">
                <div class="timeview-filter-list">
                    <a href="#">D</a>
                    <a href="#">W</a>
                    <a href="#">M</a>
                    <a href="#">Y</a>
                </div>
                <hr/>
                <div class="filter-list" id="filter-list">
                    <a href="#" hx-get="{{ url_for('servers.server_details', id=server.id) }}" hx-target="#wrapper">7d</a>
                    <a href="#" hx-get="{{ url_for('servers.server_details', id=server.id) }}" hx-target="#wrapper">1m</a>
                    <a href="#" hx-get="{{ url_for('servers.server_details', id=server.id) }}" hx-target="#wrapper">3m</a>
                    <a href="#" hx-get="{{ url_for('servers.server_details', id=server.id) }}" hx-target="#wrapper">6m</a>
                    <a href="#" hx-get="{{ url_for('servers.server_details', id=server.id) }}" hx-target="#wrapper">1y</a>
                </div>
                <form class="search-timeframe">
                    <label for="sinceDatetime">Since:</label>
                    <input type="datetime" name="since" id="sinceDatetime" value="{{ since }}">
                    <label for="toDatetime">To:</label>
                    <input type="datetime" name="to" id="toDatetime" value="{{ to }}">
                    <button class="btn" hx-get="{{ url_for('servers.server_details', id=server.id) }}" hx-target="#wrapper" hx-vals="js:{since: getInputVal('sinceDatetime'), to: getInputVal('toDatetime')}">Filter</button>
                </form>
            </div>
        </div>
        <div class="main-graph">
            <div>
                <h2></h2>
                <hr/>
                <canvas id="mainChart" width="1200" height="400"></canvas>
            </div>
        </div>
        <div class="graphs">
            <div>
                <h2>{{ currency }} Value</h2>
                <hr/>
                <canvas class="normal-chart" id="currencyValue1" width="600" height="300"></canvas>
            </div>
            <div>
                <h2>{{ currency }} Value</h2>
                <hr/>
                <canvas class="normal-chart" id="currencyValue2" width="600" height="300"></canvas>
            </div>
            <div>
                <h2>{{ currency }} Value</h2>
                <hr/>
                <canvas class="normal-chart" id="currencyValue3" width="600" height="300"></canvas>
            </div>
            <div>
                <h2>{{ currency }} Value</h2>
                <hr/>
                <canvas class="normal-chart" id="currencyValue4" width="600" height="300"></canvas>
            </div>
            <div>
                <h2>{{ currency }} Value</h2>
                <hr/>
                <canvas class="normal-chart" id="currencyValue5" width="600" height="300"></canvas>
            </div>
            <div>
                <h2>{{ currency }} Value</h2>
                <hr/>
                <canvas class="normal-chart" id="currencyValue6" width="600" height="300"></canvas>
            </div>
        </div>
        <div class="tables">
            <div class="table">
                <h2>Last 30 Days</h2>
                <table>
                    <tr>
                        <th>Currency</th>
                        <th>High</th>
                        <th>Low</th>
                        <th>Average</th>
                        <th>Change</th>
                        <th>Change (%)</th>
                    </tr>
                </table>
            </div>
            <div class="table">
                <h2>Last 90 Days</h2>
                <table>
                    <tr>
                        <th>Currency</th>
                        <th>High</th>
                        <th>Low</th>
                        <th>Average</th>
                        <th>Change</th>
                        <th>Change (%)</th>
                    </tr>
                </table>
            </div>
            <div class="table">
                <h2>All</h2>
                <table>
                    <tr>
                        <th>Currency</th>
                        <th>High</th>
                        <th>Low</th>
                        <th>Average</th>
                        <th>Change</th>
                        <th>Change (%)</th>
                    </tr>
                </table>
            </div>
            <div class="table">
                <h2>From {{ since }}</h2>
                <table>
                    <tr>
                        <th>Currency</th>
                        <th>High</th>
                        <th>Low</th>
                        <th>Average</th>
                        <th>Change</th>
                        <th>Change (%)</th>
                    </tr>
                </table>
            </div>
        </div>
        </div>
        <script>
            // var labels = {{ labels | safe }};
            // var currencyValues = {{ currency_values | safe }};
            // var labels = ['2024-05-25 00:00:00', '2024-05-26 00:00:00', '2024-05-27 00:00:00', '2024-05-28 00:00:00', '2024-05-29 00:00:00', '2024-05-30 00:00:00', '2024-05-31 00:00:00', '2024-06-01 00:00:00', '2024-06-02 00:00:00', '2024-06-03 00:00:00'];
            // var labels = ['2024-05-26 00:00:00', '2024-05-27 00:00:00', '2024-05-28 00:00:00', '2024-05-29 00:00:00', '2024-05-30 00:00:00', '2024-05-31 00:00:00', '2024-06-01 00:00:00', '2024-06-02 00:00:00', '2024-06-03 00:00:00', '2024-06-04 00:00:00'];
            var labels = ['2024-05-28 00:00:00', '2024-05-29 00:00:00', '2024-05-30 00:00:00', '2024-05-31 00:00:00', '2024-06-01 00:00:00', '2024-06-02 00:00:00', '2024-06-03 00:00:00', '2024-06-04 00:00:00'];
            var currencyValues = [
                {"name": "PLN", "values": [1, 1, 2, 3, 4, 2, 9, 7, 8, 9]},
                {"name": "USD", "values": [9, 8, 7, 6, 5, 2, 1, 3, 5, 1]},
                {"name": "XYZ", "values": [2, 6, 5, 7, 4, 4, 5, 1, 1, 20]},
                {"name": "ABC", "values": [6, 5, 7, 4, 4, 5, 1, 1, 20, 2]},
                {"name": "DEF", "values": [5, 7, 4, 4, 5, 1, 1, 15, 2, 6]},
                {"name": "GHI", "values": [1, 1, 2, 6, 5, 7, 4, 4, 5, 13]},
            ];
        </script>
        <script src="js/charts.js"></script>
        <script src="js/tables.js"></script>
        <script>updateNavFocus('analyzer');</script>
    </div>
</body>
</html>
